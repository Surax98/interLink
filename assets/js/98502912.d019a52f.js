"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[933],{50008:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>o});var t=i(85893),r=i(11151);const s={sidebar_position:1,toc_min_heading_level:2,toc_max_heading_level:5},l="Quick-start: local environment",a={id:"tutorial-users/quick-start",title:"Quick-start: local environment",description:"N.B. in the demo the oauth2 proxy authN/Z is disabled. DO NOT USE THIS IN PRODUCTION unless you know what you are doing.",source:"@site/docs/tutorial-users/01-quick-start.md",sourceDirName:"tutorial-users",slug:"/tutorial-users/quick-start",permalink:"/interLink/docs/tutorial-users/quick-start",draft:!1,unlisted:!1,editUrl:"https://github.com/interTwin-eu/interLink/docs/tutorial-users/01-quick-start.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,toc_min_heading_level:2,toc_max_heading_level:5},sidebar:"tutorialSidebar",previous:{title:"Usage",permalink:"/interLink/docs/category/usage"},next:{title:"Current limitations",permalink:"/interLink/docs/tutorial-users/limitations"}},c={},o=[{value:"Requirements",id:"requirements",level:2},{value:"Connect a remote machine with Docker",id:"connect-a-remote-machine-with-docker",level:2},{value:"Setup Kubernetes cluster",id:"setup-kubernetes-cluster",level:3},{value:"Deploy Interlink",id:"deploy-interlink",level:3},{value:"Configure interLink",id:"configure-interlink",level:4},{value:"Deploy virtualKubelet",id:"deploy-virtualkubelet",level:4},{value:"Deploy interLink via docker compose",id:"deploy-interlink-via-docker-compose",level:4},{value:"Deploy a sample application",id:"deploy-a-sample-application",level:4}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"quick-start-local-environment",children:"Quick-start: local environment"}),"\n",(0,t.jsx)(n.admonition,{type:"danger",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"N.B."})," in the demo the oauth2 proxy authN/Z is disabled. DO NOT USE THIS IN PRODUCTION unless you know what you are doing."]})}),"\n",(0,t.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.docker.com/engine/install/",children:"Docker"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://minikube.sigs.k8s.io/docs/start/",children:"Minikube"})," (kubernetes-version 1.27.1)"]}),"\n",(0,t.jsx)(n.li,{children:"Clone interlink repo:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/interTwin-eu/interLink.git \n"})}),"\n",(0,t.jsx)(n.h2,{id:"connect-a-remote-machine-with-docker",children:"Connect a remote machine with Docker"}),"\n",(0,t.jsx)(n.p,{children:"Move to example location:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd interLink/example/interlink-docker\n"})}),"\n",(0,t.jsx)(n.h3,{id:"setup-kubernetes-cluster",children:"Setup Kubernetes cluster"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"minikube start --kubernetes-version=1.27.1\n"})}),"\n",(0,t.jsx)(n.h3,{id:"deploy-interlink",children:"Deploy Interlink"}),"\n",(0,t.jsx)(n.h4,{id:"configure-interlink",children:"Configure interLink"}),"\n",(0,t.jsxs)(n.p,{children:["You need to provide the interLink IP address that should be reachable from the kubernetes pods. In case of this demo setup, that address ",(0,t.jsx)(n.strong,{children:"is the address of your machine"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"export INTERLINK_IP_ADDRESS=XXX.XX.X.XXX\n\nsed -i 's/InterlinkURL:.*/InterlinkURL: \"http:\\/\\/'$INTERLINK_IP_ADDRESS'\"/g'  vk/InterLinkConfig.yaml\n\nsed -i 's/InterlinkURL:.*/InterlinkURL: \"http:\\/\\/'$INTERLINK_IP_ADDRESS'\"/g'  interlink/InterLinkConfig.yaml | sed -i 's/SidecarURL:.*/SidecarURL: \"http:\\/\\/'$INTERLINK_IP_ADDRESS'\"/g' interlink/InterLinkConfig.yaml\n\nsed -i 's/InterlinkURL:.*/InterlinkURL: \"http:\\/\\/'$INTERLINK_IP_ADDRESS'\"/g'  interlink/sidecarConfig.yaml | sed -i 's/SidecarURL:.*/SidecarURL: \"http:\\/\\/'$INTERLINK_IP_ADDRESS'\"/g' interlink/sidecarConfig.yaml\n"})}),"\n",(0,t.jsx)(n.h4,{id:"deploy-virtualkubelet",children:"Deploy virtualKubelet"}),"\n",(0,t.jsxs)(n.p,{children:["Create the ",(0,t.jsx)(n.code,{children:"vk"})," namespace:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl create ns vk\n"})}),"\n",(0,t.jsx)(n.p,{children:"Deploy the vk resources on the cluster with:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl apply -n vk -k vk/\n"})}),"\n",(0,t.jsx)(n.p,{children:"Check that both the pods and the node are in ready status"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl get pod -n vk\n\nkubectl get node\n"})}),"\n",(0,t.jsx)(n.h4,{id:"deploy-interlink-via-docker-compose",children:"Deploy interLink via docker compose"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd interlink\n\ndocker compose up -d\n"})}),"\n",(0,t.jsx)(n.p,{children:"Check logs for both interLink APIs and SLURM sidecar:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker logs interlink-interlink-1 \n\ndocker logs interlink-docker-sidecar-1\n"})}),"\n",(0,t.jsx)(n.h4,{id:"deploy-a-sample-application",children:"Deploy a sample application"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl apply -f ../test_pod.yaml \n"})}),"\n",(0,t.jsx)(n.p,{children:"Then observe the application running and eventually succeeding via:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl get pod -n vk --watch\n"})}),"\n",(0,t.jsxs)(n.p,{children:["When finished, interrupt the watch with ",(0,t.jsx)(n.code,{children:"Ctrl+C"})," and retrieve the logs with:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl logs  -n vk test-pod-cfg-cowsay-dciangot\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Also you can see with ",(0,t.jsx)(n.code,{children:"docker ps"})," the container appearing on the ",(0,t.jsx)(n.code,{children:"interlink-docker-sidecar-1"})," container with:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker exec interlink-docker-sidecar-1  docker ps\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},11151:(e,n,i)=>{i.d(n,{Z:()=>a,a:()=>l});var t=i(67294);const r={},s=t.createContext(r);function l(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);